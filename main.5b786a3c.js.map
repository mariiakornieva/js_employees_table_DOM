{"version":3,"sources":["scripts/main.js"],"names":["sortedByHeader","table","document","querySelector","tableBody","headers","getSortCallback","sortBy","idx","includes","rowA","rowB","cells","textContent","replace","localeCompare","onBlur","e","saveCellInput","target","closest","onEnter","code","targetCell","removeEventListener","cell","cellValue","firstElementChild","value","dataset","remove","cellIndex","formatSalaryInput","salary","isNaN","toLocaleString","tHead","addEventListener","ev","targetHeader","contains","rows","reverse","sort","tBodies","append","targetRow","forEach","row","classList","toggle","content","innerHTML","focus"],"mappings":"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","file":"main.5b786a3c.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nconst tableBody = document.querySelector('tbody');\nlet sortedByHeader;\n\nconst headers = [ 'Name', 'Position', 'Office', 'Age', 'Salary' ];\n\n// sort table handler\ntable.tHead.addEventListener('click', ev => {\n  const targetHeader = ev.target.closest('th');\n\n  if (!targetHeader || !table.tHead.contains(targetHeader)) {\n    return;\n  }\n\n  const rows = [...tableBody.rows];\n\n  if (sortedByHeader === targetHeader) {\n    rows.reverse();\n  } else {\n    sortedByHeader = targetHeader;\n    rows.sort(getSortCallback(targetHeader.textContent, ev.target.cellIndex));\n  }\n\n  table.tBodies[0].append(...rows);\n});\n\n// select row handler\ntableBody.addEventListener('click', ev => {\n  const targetRow = ev.target.closest('tr');\n\n  if (!targetRow || !tableBody.contains(targetRow)) {\n    return;\n  }\n\n  [...table.rows].forEach(row => {\n    if (row === targetRow) {\n      row.classList.toggle('active');\n    } else {\n      row.classList.remove('active');\n    }\n  });\n});\n\n// modify table content handler\ntableBody.addEventListener('dblclick', ev => {\n  const cell = ev.target.closest('td');\n\n  if (!cell || !tableBody.contains(cell)) {\n    return;\n  }\n\n  const content = cell.textContent;\n\n  cell.innerHTML = `\n    <input\n      type=\"${['Age', 'Salary'].includes(headers[cell.cellIndex])\n    ? 'number' : 'text'}\"\n      class=\"cell-input\"\n      data-value=\"${content}\"\n      >\n  `;\n\n  sortedByHeader = null;\n  cell.firstElementChild.focus();\n  cell.firstElementChild.addEventListener('blur', onBlur);\n  cell.firstElementChild.addEventListener('keydown', onEnter);\n});\n\nfunction getSortCallback(sortBy, idx) {\n  if (['Age', 'Salary'].includes(sortBy)) {\n    return (rowA, rowB) => {\n      return +rowA.cells[idx].textContent.replace(/\\D/g, '')\n        - +rowB.cells[idx].textContent.replace(/\\D/g, '');\n    };\n  }\n\n  return (rowA, rowB) => {\n    return rowA.cells[idx].textContent.localeCompare(\n      rowB.cells[idx].textContent\n    );\n  };\n}\n\nfunction onBlur(e) {\n  const targetCell = e.target.closest('td');\n\n  saveCellInput(targetCell);\n}\n\nfunction onEnter(e) {\n  if (e.code !== 'Enter') {\n    return;\n  }\n\n  const targetCell = e.target.closest('td');\n\n  e.target.removeEventListener('blur', onBlur);\n  saveCellInput(targetCell);\n}\n\nfunction saveCellInput(cell) {\n  const cellValue = cell.firstElementChild.value\n    || cell.firstElementChild.dataset.value;\n\n  cell.firstElementChild.remove();\n\n  if (headers[cell.cellIndex] === 'Salary') {\n    cell.textContent = formatSalaryInput(cellValue);\n  } else {\n    cell.textContent = cellValue;\n  }\n}\n\nfunction formatSalaryInput(salary) {\n  if (isNaN(salary)) {\n    return salary;\n  }\n\n  return '$' + (+salary).toLocaleString('en-us');\n}\n"]}